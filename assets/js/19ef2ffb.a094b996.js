"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[6360],{67455:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"erlang-error-index/w/W0057","title":"W0057 - Undefined macro","description":"Error","source":"@site/docs/erlang-error-index/w/W0057.md","sourceDirName":"erlang-error-index/w","slug":"/erlang-error-index/w/W0057","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0057","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":57,"frontMatter":{"sidebar_position":57},"sidebar":"tutorialSidebar","previous":{"title":"W0056 - Use lists:reverse/2 instead of lists:reverse/1 ++ Tail","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0056"},"next":{"title":"W0058 - Can\'t find include file","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0058"}}');var s=i(74848),o=i(28453);const d={sidebar_position:57},t="W0057 - Undefined macro",c={},l=[{value:"Error",id:"error",level:2},{value:"Common Causes",id:"common-causes",level:2},{value:"Fix",id:"fix",level:2},{value:"Define the macro",id:"define-the-macro",level:3},{value:"Include the header file",id:"include-the-header-file",level:3},{value:"Fix typos",id:"fix-typos",level:3},{value:"Relationship to Erlang Service Diagnostics",id:"relationship-to-erlang-service-diagnostics",level:2},{value:"Buck Project Configuration",id:"buck-project-configuration",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"w0057---undefined-macro",children:"W0057 - Undefined macro"})}),"\n",(0,s.jsx)(n.h2,{id:"error",children:"Error"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:"-module(example).\n\nfoo() ->\n    ?UNDEFINED_MACRO.\n%%  ^^^^^^^^^^^^^^^^ error: W0057: undefined macro 'UNDEFINED_MACRO'\n\nbar(X) ->\n    ?UNDEFINED_WITH_ARGS(X, 42).\n%%  ^^^^^^^^^^^^^^^^^^^^ error: W0057: undefined macro 'UNDEFINED_WITH_ARGS/2'\n"})}),"\n",(0,s.jsx)(n.p,{children:"This diagnostic is triggered when a macro usage cannot be resolved in ELP native\ndiagnostic processing. The macro is referenced in the code but has not been defined\nin the current file or any included header files."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," This diagnostic corresponds to Erlang service diagnostics\n",(0,s.jsx)(n.strong,{children:"E1507"})," (for macros without arguments) and ",(0,s.jsx)(n.strong,{children:"E1508"})," (for macros with\narguments). W0057 only appears when the corresponding Erlang service diagnostic\ndoes not appear. If you see W0057 in a Buck project, it is likely a sign that\nthe project is not defined properly in your TARGETS/BUCK file."]}),"\n",(0,s.jsx)(n.h2,{id:"common-causes",children:"Common Causes"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Missing macro definition"}),": The macro has not been defined with\n",(0,s.jsx)(n.code,{children:"-define()"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Missing include file"}),": The macro is defined in a header file that has not\nbeen included."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Typo in macro name"}),": The macro name is misspelled."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Conditional compilation"}),": The macro is defined within a conditional block\n(e.g., ",(0,s.jsx)(n.code,{children:"-ifdef()"}),") that is not active."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"fix",children:"Fix"}),"\n",(0,s.jsx)(n.h3,{id:"define-the-macro",children:"Define the macro"}),"\n",(0,s.jsxs)(n.p,{children:["If the macro is not defined anywhere, add a ",(0,s.jsx)(n.code,{children:"-define()"})," directive:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:"-module(example).\n\n-define(UNDEFINED_MACRO, 42).\n-define(UNDEFINED_WITH_ARGS(X, Y), X + Y).\n\nfoo() ->\n    ?UNDEFINED_MACRO.\n\nbar(X) ->\n    ?UNDEFINED_WITH_ARGS(X, 42).\n"})}),"\n",(0,s.jsx)(n.h3,{id:"include-the-header-file",children:"Include the header file"}),"\n",(0,s.jsxs)(n.p,{children:["If the macro is defined in a header file, add the appropriate ",(0,s.jsx)(n.code,{children:"-include()"})," or\n",(0,s.jsx)(n.code,{children:"-include_lib()"})," directive:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:'-module(example).\n\n-include("macros.hrl").\n\nfoo() ->\n    ?UNDEFINED_MACRO.\n'})}),"\n",(0,s.jsx)(n.h3,{id:"fix-typos",children:"Fix typos"}),"\n",(0,s.jsx)(n.p,{children:"If the macro name is misspelled, correct it to match the definition:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:"-module(example).\n\n-define(DEFINED_MACRO, 42).\n\nfoo() ->\n    ?DEFINED_MACRO.  % Fixed typo\n"})}),"\n",(0,s.jsx)(n.h2,{id:"relationship-to-erlang-service-diagnostics",children:"Relationship to Erlang Service Diagnostics"}),"\n",(0,s.jsx)(n.p,{children:"W0057 is filtered out when the Erlang service reports the corresponding\ndiagnostics:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"E1507"}),": undefined macro (without arguments)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"E1508"}),": undefined macro (with arguments)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When both diagnostics detect the same issue, only the Erlang service diagnostic\nwill be shown to avoid duplication."}),"\n",(0,s.jsx)(n.h2,{id:"buck-project-configuration",children:"Buck Project Configuration"}),"\n",(0,s.jsx)(n.p,{children:"If you see W0057 in a Buck project, this typically indicates that your TARGETS\nfile is not properly configured. The Erlang service relies on Buck to understand\nthe project structure, dependencies, and include paths. Check that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["All application dependencies are declared in the ",(0,s.jsx)(n.code,{children:"deps"})," attribute"]}),"\n",(0,s.jsx)(n.li,{children:"Include paths are properly configured"}),"\n",(0,s.jsx)(n.li,{children:"The macro definition is in an accessible dependency"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var r=i(96540);const s={},o=r.createContext(s);function d(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);