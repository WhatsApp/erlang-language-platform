"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[7878],{47091:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>x,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"erlang-error-index/w/W0063","title":"W0063 - Mixed Strict and Relaxed Generators in Zip","description":"Example","source":"@site/docs/erlang-error-index/w/W0063.md","sourceDirName":"erlang-error-index/w","slug":"/erlang-error-index/w/W0063","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0063","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":63,"frontMatter":{"sidebar_position":63},"sidebar":"tutorialSidebar","previous":{"title":"W0060 - Bound Variable in LHS","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0060"}}');var s=r(74848),i=r(28453);const a={sidebar_position:63},d="W0063 - Mixed Strict and Relaxed Generators in Zip",l={},o=[{value:"Example",id:"example",level:2},{value:"Explanation",id:"explanation",level:2},{value:"Recommended Fix",id:"recommended-fix",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"w0063---mixed-strict-and-relaxed-generators-in-zip",children:"W0063 - Mixed Strict and Relaxed Generators in Zip"})}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:"-module(example).\n-export([test/0]).\n\n%% List generators - mixed strict/relaxed\ntest_list() -> [Y || Y <- [a] && Y <:- [b]].\n\n%% Map generators - mixed strict/relaxed\ntest_map(M1, M2) -> [{K1, K2} || K1 := V1 <- M1 && K2 := V2 <:- M2].\n\n%% Binary generators - mixed strict/relaxed\ntest_binary() -> << <<X, Y>> || <<X>> <= <<1,2>> && <<Y>> <:= <<3,4>> >>.\n\n%% Cross-type - list and map mixed\ntest_cross(List, Map) -> [{X, K} || X <- List && K := V <:- Map].\n"})}),"\n",(0,s.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,s.jsxs)(n.p,{children:["Mixing strict generators (",(0,s.jsx)(n.code,{children:"<:-"}),", ",(0,s.jsx)(n.code,{children:"<:="}),") and relaxed generators (",(0,s.jsx)(n.code,{children:"<-"}),", ",(0,s.jsx)(n.code,{children:"<="}),")\nwithin the same zip generator (",(0,s.jsx)(n.code,{children:"&&"}),") can lead to unexpected behavior, as the\nsemantics can differ between compiled modules and interpreted code (e.g., in the shell)."]}),"\n",(0,s.jsx)(n.p,{children:"This applies to all generator types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"List generators"}),": ",(0,s.jsx)(n.code,{children:"<-"})," (relaxed) vs ",(0,s.jsx)(n.code,{children:"<:-"})," (strict)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Binary generators"}),": ",(0,s.jsx)(n.code,{children:"<="})," (relaxed) vs ",(0,s.jsx)(n.code,{children:"<:="})," (strict)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Map generators"}),": ",(0,s.jsx)(n.code,{children:"K := V <-"})," (relaxed) vs ",(0,s.jsx)(n.code,{children:"K := V <:-"})," (strict)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://github.com/erlang/otp/issues/9435",children:"erlang/otp#9435"})," for an example\nof unexpected behavior when mixing generator types."]}),"\n",(0,s.jsx)(n.h2,{id:"recommended-fix",children:"Recommended Fix"}),"\n",(0,s.jsx)(n.p,{children:"Use consistent generator types within the same zip generator:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-erlang",children:"%% All strict - behavior is well-defined\ntest_strict(M1, M2) -> [{K1, K2} || K1 := V1 <:- M1 && K2 := V2 <:- M2].\n\n%% All relaxed - behavior is well-defined\ntest_relaxed(M1, M2) -> [{K1, K2} || K1 := V1 <- M1 && K2 := V2 <- M2].\n\n%% Cross-type but consistent strictness - OK\ntest_cross_strict(List, Map) -> [{X, K} || X <:- List && K := V <:- Map].\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note: This diagnostic only applies to zip generators (",(0,s.jsx)(n.code,{children:"&&"}),").\nSequential/nested generators (comma-separated) are not affected."]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>d});var t=r(96540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);