"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[6483],{22682:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>a,toc:()=>s});const a=JSON.parse('{"id":"erlang-error-index/w/W0047","title":"W0047 - Avoid explicit garbage collection","description":"Warning","source":"@site/docs/erlang-error-index/w/W0047.md","sourceDirName":"erlang-error-index/w","slug":"/erlang-error-index/w/W0047","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0047","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":47,"frontMatter":{"sidebar_position":47},"sidebar":"tutorialSidebar","previous":{"title":"W0046 - Undocumented module","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0046"},"next":{"title":"W0048 - Avoid -dialyzer attribute","permalink":"/erlang-language-platform/docs/erlang-error-index/w/W0048"}}');var t=r(74848),o=r(28453);const i={sidebar_position:47},l="W0047 - Avoid explicit garbage collection",c={},s=[{value:"Warning",id:"warning",level:2},{value:"Explanation",id:"explanation",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"w0047---avoid-explicit-garbage-collection",children:"W0047 - Avoid explicit garbage collection"})}),"\n",(0,t.jsx)(n.h2,{id:"warning",children:"Warning"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-erlang",children:"-module(main).\n-export([warning/0]).\n\nwarning() ->\n    erlang:garbage_collect().\n%%  ^^^^^^^^^^^^^^^^^^^^^^ \ud83d\udca1 warning: Avoid forcing garbage collection.\n"})}),"\n",(0,t.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,t.jsxs)(n.p,{children:["Erlang manages dynamic memory with a ",(0,t.jsx)(n.em,{children:"tracing garbage collector"}),". More precisely\na ",(0,t.jsx)(n.em,{children:"per process generational semi-space copying collector"}),". More information\nabout the Erlang garbage collector can be found in the\n",(0,t.jsx)(n.a,{href:"https://www.erlang.org/doc/apps/erts/garbage_collection.html",children:"official documentation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["While garbage collection happens automatically, it can manually be triggered via\nthe ",(0,t.jsx)(n.code,{children:"erlang:garbage_collect/0,1,2"}),". This function forces an immediate garbage\ncollection of the executing process. The function is not to be used unless it\nhas been noticed (or there are good reasons to suspect) that the spontaneous\ngarbage collection will occur too late or not at all. Improper use of this\nfunction can seriously degrade the performance of the system."]}),"\n",(0,t.jsx)(n.p,{children:"Instead of forcing garbage collection, try to evaluate what creates a\nsignificant amount of garbage which trickes into old heap (and is not collected\nwith minor runs). Refactor your Erlang code to either generate smaller amount of\ngarbage (this also helps with CPU). Start with making a test case reproducing\nhigh GC."}),"\n",(0,t.jsx)(n.p,{children:"If you are certain that explicit garbage collection is needed, you can use add\nthe following to silent this warning:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"% elp:ignore W0047 (no_garbage_collect) - Explanation here\n"})})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var a=r(96540);const t={},o=a.createContext(t);function i(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);